<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1374px" preserveAspectRatio="none" style="width:1706px;height:1374px" version="1.1" viewBox="0 0 1706 1374" width="1706px" zoomAndPan="magnify" id="svg20744" sodipodi:docname="secrets.svg" inkscape:version="0.92.2 5c3e80d, 2017-08-06" inkscape:export-filename="/home/vishnu/tank/git/dcos-labs/secure-mesos-workshop/figures/png/secrets.png" inkscape:export-xdpi="384" inkscape:export-ydpi="384">
  <metadata id="metadata20748">
    <rdf:RDF>
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="640" inkscape:window-height="480" id="namedview20746" showgrid="false" inkscape:zoom="0.85298399" inkscape:cx="853" inkscape:cy="687" inkscape:current-layer="svg20744" />
  <defs id="defs20322">
    <linearGradient id="gx1ybs9arkk3s0" x1="0%" x2="100%" y1="50%" y2="50%">
      <stop offset="0%" stop-color="#9351E5" id="stop20317" />
      <stop offset="100%" stop-color="#EF468B" id="stop20319" />
    </linearGradient>
  </defs>
  <g id="g20742">
    <rect fill="#FFFFFF" height="23.9923" style="stroke:#FFFFFF;stroke-width:0" width="164" x="771.25" y="12" id="rect20324" />
    <text fill="#000000" font-family="Source Sans Pro" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="779.25" y="28.5716" id="text20326">Mesos Secrets Injection</text>
    <rect fill="#F56753" height="1219.3102" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="54.5" y="132.9846" id="rect20328" />
    <rect fill="#F56753" height="1201.3102" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="229.5" y="150.9846" id="rect20330" />
    <rect fill="#F56753" height="1046.4125" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="327.5" y="258.9108" id="rect20332" />
    <rect fill="#F56753" height="285.8386" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="526.5" y="307.8812" id="rect20334" />
    <rect fill="#F56753" height="371.7943" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="655.5" y="714.6471" id="rect20336" />
    <rect fill="#F56753" height="240.8534" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="982.5" y="334.8665" id="rect20338" />
    <rect fill="#F56753" height="240.8534" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="982.5" y="741.6323" id="rect20340" />
    <rect fill="#F56753" height="157.8977" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="1125.5" y="361.8517" id="rect20342" />
    <rect fill="#F56753" height="157.8977" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="1125.5" y="768.6176" id="rect20344" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="59" x2="59" y1="122.9846" y2="1362.2948" id="line20346" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="234.5" x2="234.5" y1="122.9846" y2="1362.2948" id="line20348" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="332.5" x2="332.5" y1="122.9846" y2="1362.2948" id="line20350" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="531" x2="531" y1="122.9846" y2="1362.2948" id="line20352" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="660" x2="660" y1="122.9846" y2="1362.2948" id="line20354" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="987" x2="987" y1="122.9846" y2="1362.2948" id="line20356" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="1130.5" x2="1130.5" y1="122.9846" y2="1362.2948" id="line20358" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="1228.5" x2="1228.5" y1="122.9846" y2="1362.2948" id="line20360" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="1497.5" x2="1497.5" y1="122.9846" y2="1362.2948" id="line20362" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="1647.5" x2="1647.5" y1="122.9846" y2="1362.2948" id="line20364" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="23" y="120.2141" id="text20366">Framework</text>
    <ellipse cx="59.5" cy="55.9923" fill="url(#gx1ybs9arkk3s0)" rx="8" ry="8" style="stroke:#9351E5;stroke-width:2" id="ellipse20368" />
    <path d="M59.5,63.9923 L59.5,90.9923 M46.5,71.9923 L72.5,71.9923 M59.5,90.9923 L46.5,105.9923 M59.5,90.9923 L72.5,105.9923 " fill="url(#gx1ybs9arkk3s0)" style="stroke:#9351E5;stroke-width:2" id="path20370" />
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="90" x="189.5" y="93.9923" id="rect20372" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="196.5" y="112.2141" id="text20374">Mesos Master</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="86" x="289.5" y="93.9923" id="rect20376" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="296.5" y="112.2141" id="text20378">Mesos Agent</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="41.9846" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="135" x="464" y="80" id="rect20380" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="471" y="98.2218" id="text20382">Secrets Environment</text>
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="510" y="112.2141" id="text20384">Isolator</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="41.9846" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="103" x="609" y="80" id="rect20386" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="616" y="98.2218" id="text20388">Secrets Volume</text>
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="639" y="112.2141" id="text20390">Isolator</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="109" x="933" y="93.9923" id="rect20392" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="940" y="112.2141" id="text20394">Secrets Resolver</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1088.5" y="120.2141" id="text20396">Secrets Store</text>
    <path d="M1112.5,72.9923 C1112.5,62.9923 1130.5,62.9923 1130.5,62.9923 C1130.5,62.9923 1148.5,62.9923 1148.5,72.9923 L1148.5,98.9923 C1148.5,108.9923 1130.5,108.9923 1130.5,108.9923 C1130.5,108.9923 1112.5,108.9923 1112.5,98.9923 L1112.5,72.9923 " fill="#20D5FF" style="stroke:#323A4E;stroke-width:1.5" id="path20398" />
    <path d="M1112.5,72.9923 C1112.5,82.9923 1130.5,82.9923 1130.5,82.9923 C1130.5,82.9923 1148.5,82.9923 1148.5,72.9923 " fill="none" style="stroke:#323A4E;stroke-width:1.5" id="path20400" />
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="93" x="1182.5" y="93.9923" id="rect20402" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="1189.5" y="112.2141" id="text20404">Containerizer</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="65" x="1465.5" y="93.9923" id="rect20406" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="1472.5" y="112.2141" id="text20408">Executor</text>
    <rect fill="url(#gx1ybs9arkk3s0)" height="27.9923" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="53" x="1621.5" y="93.9923" id="rect20410" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1628.5" y="112.2141" id="text20412">Task(s)</text>
    <rect height="1219.3102" style="fill:#f56753;fill-opacity:0.49803922;stroke:#f56753;stroke-width:1" width="10" x="54.5" y="124.9846" id="rect20414" />
    <rect fill="#F56753" height="1201.3102" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="229.5" y="150.9846" id="rect20416" />
    <rect fill="#F56753" height="1046.4125" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="327.5" y="258.9108" id="rect20418" />
    <rect fill="#F56753" height="285.8386" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="526.5" y="307.8812" id="rect20420" />
    <rect fill="#F56753" height="371.7943" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="655.5" y="714.6471" id="rect20422" />
    <rect fill="#F56753" height="240.8534" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="982.5" y="334.8665" id="rect20424" />
    <rect fill="#F56753" height="240.8534" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="982.5" y="741.6323" id="rect20426" />
    <rect fill="#F56753" height="157.8977" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="1125.5" y="361.8517" id="rect20428" />
    <rect fill="#F56753" height="157.8977" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="1125.5" y="768.6176" id="rect20430" />
    <polygon fill="#323A4E" points="217.5,146.9846,227.5,150.9846,217.5,154.9846,221.5,150.9846" style="stroke:#323A4E;stroke-width:1" id="polygon20432" />
    <line style="stroke:#323A4E;stroke-width:1" x1="64.5" x2="223.5" y1="150.9846" y2="150.9846" id="line20434" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="71.5" y="147.3988" id="text20436">TaskInfo with Secret(s)</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="239.5" x2="281.5" y1="194.9329" y2="194.9329" id="line20438" />
    <line style="stroke:#323A4E;stroke-width:1" x1="281.5" x2="281.5" y1="194.9329" y2="207.9329" id="line20440" />
    <line style="stroke:#323A4E;stroke-width:1" x1="240.5" x2="281.5" y1="207.9329" y2="207.9329" id="line20442" />
    <polygon fill="#323A4E" points="250.5,203.9329,240.5,207.9329,250.5,211.9329,246.5,207.9329" style="stroke:#323A4E;stroke-width:1" id="polygon20444" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="246.5" y="177.3766" id="text20446">Validate</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="246.5" y="190.3618" id="text20448">(+AuthN+Z)</text>
    <polygon fill="#FEDF57" points="86,164.9698,86,212.9698,224,212.9698,224,174.9698,214,164.9698,86,164.9698" style="stroke:#FEDF57;stroke-width:0" id="polygon20450" />
    <line style="stroke:#FEDF57;stroke-width:0" x1="214" x2="214" y1="164.9698" y2="174.9698" id="line20452" />
    <line style="stroke:#FEDF57;stroke-width:0" x1="224" x2="214" y1="174.9698" y2="174.9698" id="line20454" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="92" y="180.384" id="text20456">Authorize access</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="92" y="193.3692" id="text20458">to secret(s) by</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="92" y="206.3545" id="text20460">Namespace Mapping</text>
    <rect fill="none" height="1119.3693" style="stroke:#27C97B;stroke-width:2" width="1681.5" x="13" y="225.9255" id="rect20462" />
    <polygon fill="#27C97B" points="13,225.9255,74,225.9255,74,229.9255,64,239.9255,13,239.9255,13,225.9255" style="stroke:#27C97B;stroke-width:2" id="polygon20464" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="237.6643" id="text20466">alt</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="89" y="237.0112" id="text20468">[Authorized]</text>
    <polygon fill="#323A4E" points="315.5,254.9108,325.5,258.9108,315.5,262.9108,319.5,258.9108" style="stroke:#323A4E;stroke-width:1" id="polygon20470" />
    <line style="stroke:#323A4E;stroke-width:1" x1="239.5" x2="321.5" y1="258.9108" y2="258.9108" id="line20472" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="246.5" y="255.3249" id="text20474">TaskInfo</text>
    <rect fill="none" height="1023.4272" style="stroke:#27C97B;stroke-width:2" width="1405" x="279.5" y="274.896" id="rect20476" />
    <polygon fill="#27C97B" points="279.5,274.896,340.5,274.896,340.5,278.896,330.5,288.896,279.5,288.896,279.5,274.896" style="stroke:#27C97B;stroke-width:2" id="polygon20478" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="294.5" y="286.6348" id="text20480">alt</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="355.5" y="285.9817" id="text20482">[Environment Secret(s)]</text>
    <polygon fill="#323A4E" points="514.5,303.8812,524.5,307.8812,514.5,311.8812,518.5,307.8812" style="stroke:#323A4E;stroke-width:1" id="polygon20484" />
    <line style="stroke:#323A4E;stroke-width:1" x1="337.5" x2="520.5" y1="307.8812" y2="307.8812" id="line20486" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="344.5" y="304.2954" id="text20488">Retrieve Environment Secret(s)</text>
    <polygon fill="#323A4E" points="970.5,330.8665,980.5,334.8665,970.5,338.8665,974.5,334.8665" style="stroke:#323A4E;stroke-width:1" id="polygon20490" />
    <line style="stroke:#323A4E;stroke-width:1" x1="536.5" x2="976.5" y1="334.8665" y2="334.8665" id="line20492" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="543.5" y="331.2806" id="text20494">Resolve Secret(s)</text>
    <polygon fill="#323A4E" points="1113.5,357.8517,1123.5,361.8517,1113.5,365.8517,1117.5,361.8517" style="stroke:#323A4E;stroke-width:1" id="polygon20496" />
    <line style="stroke:#323A4E;stroke-width:1" x1="992.5" x2="1119.5" y1="361.8517" y2="361.8517" id="line20498" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="999.5" y="358.2658" id="text20500">Get secret(s)</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="1135.5" x2="1177.5" y1="402.8074" y2="402.8074" id="line20502" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1177.5" x2="1177.5" y1="402.8074" y2="415.8074" id="line20504" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1136.5" x2="1177.5" y1="415.8074" y2="415.8074" id="line20506" />
    <polygon fill="#323A4E" points="1146.5,411.8074,1136.5,415.8074,1146.5,419.8074,1142.5,415.8074" style="stroke:#323A4E;stroke-width:1" id="polygon20508" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1142.5" y="385.2511" id="text20510">Validate</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1142.5" y="398.2363" id="text20512">(+AuthN+Z)</text>
    <rect fill="none" height="81.942" style="stroke:#27C97B;stroke-width:2" width="259.5" x="923" y="430.8074" id="rect20514" />
    <polygon fill="#27C97B" points="923,430.8074,984,430.8074,984,434.8074,974,444.8074,923,444.8074,923,430.8074" style="stroke:#27C97B;stroke-width:2" id="polygon20516" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="938" y="442.5462" id="text20518">alt</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="999" y="441.8931" id="text20520">[Valid]</text>
    <polygon fill="#323A4E" points="1003.5,459.7926,993.5,463.7926,1003.5,467.7926,999.5,463.7926" style="stroke:#323A4E;stroke-width:1" id="polygon20522" />
    <line style="stroke:#323A4E;stroke-width:1" x1="997.5" x2="1124.5" y1="463.7926" y2="463.7926" id="line20524" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="1009.5" y="460.2068" id="text20526">Secret(s) for you!</text>
    <line style="stroke:#27C97B;stroke-width:1;stroke-dasharray:2, 2" x1="923" x2="1182.5" y1="473.7778" y2="473.7778" id="line20528" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="928" y="482.8635" id="text20530">[Invalid]</text>
    <polygon fill="#323A4E" points="1003.5,499.7642,993.5,503.7642,1003.5,507.7642,999.5,503.7642" style="stroke:#323A4E;stroke-width:1" id="polygon20532" />
    <line style="stroke:#323A4E;stroke-width:1" x1="997.5" x2="1124.5" y1="503.7642" y2="503.7642" id="line20534" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1009.5" y="500.1783" id="text20536">No Secret(s) for you!</text>
    <rect fill="none" height="41.9705" style="stroke:#27C97B;stroke-width:2" width="598" x="454" y="526.7494" id="rect20538" />
    <polygon fill="#27C97B" points="454,526.7494,525,526.7494,525,530.7494,515,540.7494,454,540.7494,454,526.7494" style="stroke:#27C97B;stroke-width:2" id="polygon20540" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="469" y="538.4882" id="text20542">loop</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="540" y="537.8351" id="text20544">[For each secret]</text>
    <polygon fill="#323A4E" points="547.5,555.7346,537.5,559.7346,547.5,563.7346,543.5,559.7346" style="stroke:#323A4E;stroke-width:1" id="polygon20546" />
    <line style="stroke:#323A4E;stroke-width:1" x1="541.5" x2="981.5" y1="559.7346" y2="559.7346" id="line20548" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="553.5" y="556.1488" id="text20550">Secret</text>
    <polygon fill="#323A4E" points="348.5,589.7198,338.5,593.7198,348.5,597.7198,344.5,593.7198" style="stroke:#323A4E;stroke-width:1" id="polygon20552" />
    <line style="stroke:#323A4E;stroke-width:1" x1="342.5" x2="530.5" y1="593.7198" y2="593.7198" id="line20554" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="354.5" y="590.134" id="text20556">Here are your env secret(s)</text>
    <polygon fill="#323A4E" points="1217,616.7051,1227,620.7051,1217,624.7051,1221,620.7051" style="stroke:#323A4E;stroke-width:1" id="polygon20558" />
    <line style="stroke:#323A4E;stroke-width:1" x1="337.5" x2="1223" y1="620.7051" y2="620.7051" id="line20560" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="344.5" y="617.1192" id="text20562">Inject Env Secret(s)</text>
    <polygon fill="#323A4E" points="1486,643.6903,1496,647.6903,1486,651.6903,1490,647.6903" style="stroke:#323A4E;stroke-width:1" id="polygon20564" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1229" x2="1492" y1="647.6903" y2="647.6903" id="line20566" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1236" y="644.1045" id="text20568">Inject Env Secret(s)</text>
    <polygon fill="#323A4E" points="1636,670.6755,1646,674.6755,1636,678.6755,1640,674.6755" style="stroke:#323A4E;stroke-width:1" id="polygon20570" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1498" x2="1642" y1="674.6755" y2="674.6755" id="line20572" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1505" y="671.0897" id="text20574">Inject Env Secret(s)</text>
    <line style="stroke:#27C97B;stroke-width:1;stroke-dasharray:2, 2" x1="279.5" x2="1684.5" y1="684.6608" y2="684.6608" id="line20576" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="284.5" y="693.7465" id="text20578">[Volume Secret(s)]</text>
    <polygon fill="#323A4E" points="643.5,710.6471,653.5,714.6471,643.5,718.6471,647.5,714.6471" style="stroke:#323A4E;stroke-width:1" id="polygon20580" />
    <line style="stroke:#323A4E;stroke-width:1" x1="337.5" x2="649.5" y1="714.6471" y2="714.6471" id="line20582" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="344.5" y="711.0612" id="text20584">Retrieve Volume Secret(s)</text>
    <polygon fill="#323A4E" points="970.5,737.6323,980.5,741.6323,970.5,745.6323,974.5,741.6323" style="stroke:#323A4E;stroke-width:1" id="polygon20586" />
    <line style="stroke:#323A4E;stroke-width:1" x1="665.5" x2="976.5" y1="741.6323" y2="741.6323" id="line20588" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="672.5" y="738.0465" id="text20590">Resolve Secret(s)</text>
    <polygon fill="#323A4E" points="1113.5,764.6176,1123.5,768.6176,1113.5,772.6176,1117.5,768.6176" style="stroke:#323A4E;stroke-width:1" id="polygon20592" />
    <line style="stroke:#323A4E;stroke-width:1" x1="992.5" x2="1119.5" y1="768.6176" y2="768.6176" id="line20594" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="999.5" y="765.0317" id="text20596">Get Secret(s)</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="1135.5" x2="1177.5" y1="809.5732" y2="809.5732" id="line20598" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1177.5" x2="1177.5" y1="809.5732" y2="822.5732" id="line20600" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1136.5" x2="1177.5" y1="822.5732" y2="822.5732" id="line20602" />
    <polygon fill="#323A4E" points="1146.5,818.5732,1136.5,822.5732,1146.5,826.5732,1142.5,822.5732" style="stroke:#323A4E;stroke-width:1" id="polygon20604" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1142.5" y="792.0169" id="text20606">Validate</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1142.5" y="805.0022" id="text20608">(+AuthN+Z)</text>
    <rect fill="none" height="81.942" style="stroke:#27C97B;stroke-width:2" width="259.5" x="923" y="837.5732" id="rect20610" />
    <polygon fill="#27C97B" points="923,837.5732,984,837.5732,984,841.5732,974,851.5732,923,851.5732,923,837.5732" style="stroke:#27C97B;stroke-width:2" id="polygon20612" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="938" y="849.312" id="text20614">alt</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="999" y="848.6589" id="text20616">[Valid request]</text>
    <polygon fill="#323A4E" points="1003.5,866.5585,993.5,870.5585,1003.5,874.5585,999.5,870.5585" style="stroke:#323A4E;stroke-width:1" id="polygon20618" />
    <line style="stroke:#323A4E;stroke-width:1" x1="997.5" x2="1124.5" y1="870.5585" y2="870.5585" id="line20620" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="1009.5" y="866.9726" id="text20622">Secret(s) for you!</text>
    <line style="stroke:#27C97B;stroke-width:1;stroke-dasharray:2, 2" x1="923" x2="1182.5" y1="880.5437" y2="880.5437" id="line20624" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="928" y="889.6294" id="text20626">[Invalid Request]</text>
    <polygon fill="#323A4E" points="1003.5,906.53,993.5,910.53,1003.5,914.53,999.5,910.53" style="stroke:#323A4E;stroke-width:1" id="polygon20628" />
    <line style="stroke:#323A4E;stroke-width:1" x1="997.5" x2="1124.5" y1="910.53" y2="910.53" id="line20630" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1009.5" y="906.9442" id="text20632">No Secret(s) for you!</text>
    <rect fill="none" height="41.9705" style="stroke:#27C97B;stroke-width:2" width="453" x="599" y="933.5153" id="rect20634" />
    <polygon fill="#27C97B" points="599,933.5153,670,933.5153,670,937.5153,660,947.5153,599,947.5153,599,933.5153" style="stroke:#27C97B;stroke-width:2" id="polygon20636" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="614" y="945.254" id="text20638">loop</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="685" y="944.601" id="text20640">[For each secret]</text>
    <polygon fill="#323A4E" points="676.5,962.5005,666.5,966.5005,676.5,970.5005,672.5,966.5005" style="stroke:#323A4E;stroke-width:1" id="polygon20642" />
    <line style="stroke:#323A4E;stroke-width:1" x1="670.5" x2="981.5" y1="966.5005" y2="966.5005" id="line20644" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="682.5" y="962.9146" id="text20646">Secret</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="665.5" x2="707.5" y1="1004.4636" y2="1004.4636" id="line20648" />
    <line style="stroke:#323A4E;stroke-width:1" x1="707.5" x2="707.5" y1="1004.4636" y2="1017.4636" id="line20650" />
    <line style="stroke:#323A4E;stroke-width:1" x1="666.5" x2="707.5" y1="1017.4636" y2="1017.4636" id="line20652" />
    <polygon fill="#323A4E" points="676.5,1013.4636,666.5,1017.4636,676.5,1021.4636,672.5,1017.4636" style="stroke:#323A4E;stroke-width:1" id="polygon20654" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="672.5" y="999.8925" id="text20656">Place secret into agent-common ramfs</text>
    <polygon fill="#FEDF57" points="496,987.4857,496,1022.4857,650,1022.4857,650,997.4857,640,987.4857,496,987.4857" style="stroke:#FEDF57;stroke-width:0" id="polygon20658" />
    <line style="stroke:#FEDF57;stroke-width:0" x1="640" x2="640" y1="987.4857" y2="997.4857" id="line20660" />
    <line style="stroke:#FEDF57;stroke-width:0" x1="650" x2="640" y1="997.4857" y2="997.4857" id="line20662" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="502" y="1002.8999" id="text20664">The agent-wide ramfs is</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="502" y="1015.8851" id="text20666">created during agent init</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="665.5" x2="707.5" y1="1047.4414" y2="1047.4414" id="line20668" />
    <line style="stroke:#323A4E;stroke-width:1" x1="707.5" x2="707.5" y1="1047.4414" y2="1060.4414" id="line20670" />
    <line style="stroke:#323A4E;stroke-width:1" x1="666.5" x2="707.5" y1="1060.4414" y2="1060.4414" id="line20672" />
    <polygon fill="#323A4E" points="676.5,1056.4414,666.5,1060.4414,676.5,1064.4414,672.5,1060.4414" style="stroke:#323A4E;stroke-width:1" id="polygon20674" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="672.5" y="1042.8703" id="text20676">Create ramfs in/for the sandbox and build command list</text>
    <polygon fill="#323A4E" points="348.5,1082.4414,338.5,1086.4414,348.5,1090.4414,344.5,1086.4414" style="stroke:#323A4E;stroke-width:1" id="polygon20678" />
    <line style="stroke:#323A4E;stroke-width:1" x1="342.5" x2="659.5" y1="1086.4414" y2="1086.4414" id="line20680" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="354.5" y="1082.8556" id="text20682">Command List</text>
    <polygon fill="#323A4E" points="1217,1109.4266,1227,1113.4266,1217,1117.4266,1221,1113.4266" style="stroke:#323A4E;stroke-width:1" id="polygon20684" />
    <line style="stroke:#323A4E;stroke-width:1" x1="337.5" x2="1223" y1="1113.4266" y2="1113.4266" id="line20686" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="344.5" y="1109.8408" id="text20688">Command List</text>
    <rect fill="none" height="107.9409" style="stroke:#27C97B;stroke-width:2" width="330.5" x="1172.5" y="1129.4119" id="rect20690" />
    <polygon fill="#27C97B" points="1172.5,1129.4119,1243.5,1129.4119,1243.5,1133.4119,1233.5,1143.4119,1172.5,1143.4119,1172.5,1129.4119" style="stroke:#27C97B;stroke-width:2" id="polygon20692" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1187.5" y="1141.1507" id="text20694">loop</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="1258.5" y="1140.4976" id="text20696">[For each secret]</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="1229" x2="1271" y1="1176.3676" y2="1176.3676" id="line20698" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1271" x2="1271" y1="1176.3676" y2="1189.3676" id="line20700" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1230" x2="1271" y1="1189.3676" y2="1189.3676" id="line20702" />
    <polygon fill="#323A4E" points="1240,1185.3676,1230,1189.3676,1240,1193.3676,1236,1189.3676" style="stroke:#323A4E;stroke-width:1" id="polygon20704" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="1236" y="1158.8112" id="text20706">mv secret from agent ramfs</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="1236" y="1171.7965" id="text20708">to sandbox ramfs</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="1229" x2="1271" y1="1216.3528" y2="1216.3528" id="line20710" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1271" x2="1271" y1="1216.3528" y2="1229.3528" id="line20712" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1230" x2="1271" y1="1229.3528" y2="1229.3528" id="line20714" />
    <polygon fill="#323A4E" points="1240,1225.3528,1230,1229.3528,1240,1233.3528,1236,1229.3528" style="stroke:#323A4E;stroke-width:1" id="polygon20716" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="1236" y="1211.7817" id="text20718">bind-mount ramfs from sandbox into container</text>
    <polygon fill="#323A4E" points="1486,1258.3528,1496,1262.3528,1486,1266.3528,1490,1262.3528" style="stroke:#323A4E;stroke-width:1" id="polygon20720" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1229" x2="1492" y1="1262.3528" y2="1262.3528" id="line20722" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="1236" y="1258.7669" id="text20724">Inject Volume Secret(s)</text>
    <polygon fill="#323A4E" points="1636,1285.338,1646,1289.338,1636,1293.338,1640,1289.338" style="stroke:#323A4E;stroke-width:1" id="polygon20726" />
    <line style="stroke:#323A4E;stroke-width:1" x1="1498" x2="1642" y1="1289.338" y2="1289.338" id="line20728" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="1505" y="1285.7522" id="text20730">Inject Volume Secret(s)</text>
    <line style="stroke:#27C97B;stroke-width:1;stroke-dasharray:2, 2" x1="13" x2="1694.5" y1="1306.3232" y2="1306.3232" id="line20732" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="18" y="1315.4089" id="text20734">[Unauthorized]</text>
    <polygon fill="#323A4E" points="75.5,1332.3096,65.5,1336.3096,75.5,1340.3096,71.5,1336.3096" style="stroke:#323A4E;stroke-width:1" id="polygon20736" />
    <line style="stroke:#323A4E;stroke-width:1" x1="69.5" x2="228.5" y1="1336.3096" y2="1336.3096" id="line20738" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="81.5" y="1332.7237" id="text20740">Unauthorized for Secret(s)</text>
    <!--
@startuml

' Mesosphere Theme to be used with the PlantUML !includeurl directive like so:
'!includeurl https://raw.githubusercontent.com/vishnu2kmohan/puml/master/ipuml/Mesosphere.ipuml

' Mesosphere Colors

' Uncomment to use the new Teoz layout engine instead of Puma (default)
'!pragma teoz on

skinparam backgroundColor         transparent
skinparam defaultFontName         Source Sans Pro
skinparam footerFontColor         #323A4E
skinparam headerFontColor         #323A4E
skinparam roundcorner             10
skinparam shadowing               false

skinparam activity {
  BackgroundColor                 #9351E5|#EF468B
  BarColor                        #323A4E
  BorderColor                     transparent
  BorderThickness                 0
  DiamondBackgroundColor          #9351E5|#EF468B
  DiamondBorderColor              transparent
  DiamondBorderThickness          0
  DiamondFontColor                white
  EndColor                        #323A4E
  FontColor                       white   
  StartColor                      #323A4E
}

skinparam actor {
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #9351E5
  FontColor                       #323A4E
}

skinparam arrow {
  Color                           #323A4E
  FontColor                       #323A4E
}

skinparam database {
  BackgroundColor                 #20D5FF
  BorderColor                     #323A4E
  FontColor                       #323A4E
}

skinparam note {
  BackgroundColor                 #FEDF57
  BorderColor                     #FEDF57
  BorderThickness                 0
  FontColor                       #323A4E
}

skinparam partition {
  BackgroundColor                 transparent
  BorderColor                     #323A4E
  FontColor                       #323A4E
}

skinparam sequence {
  BoxBackgroundColor              #20D5FF
  BoxBorderColor                  #20D5FF
  BoxFontColor                    #323A4E
  BoxLineColor                    #20D5FF
  DividerBackgroundColor          #323A4E
  DividerBorderColor              #323A4E
  DividerFontColor                white
  GroupBackgroundColor            #27C97B
  GroupBodyBackgroundColor        transparent
  GroupBorderColor                #27C97B
  GroupFontColor                  #323A4E
  GroupHeaderFontColor            #323A4E
  LifeLineBackgroundColor         #F56753
  LifeLineBorderColor             #F56753
  MessageAlign                    left
  NewpageSeparatorColor           #323A4E
  ParticipantBackgroundColor      #9351E5|#EF468B
  ParticipantBorderColor          transparent
  ParticipantBorderThickness      0
  ParticipantFontColor            white
  ReferenceBackgroundColor        #323A4E
  ReferenceBorderColor            #323A4E
  ReferenceFontColor              white
  ReferenceHeaderBackgroundColor  #323A4E
  StereotypeFontColor             #323A4E
}

skinparam state {
  AttributeFontColor              white
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #F56753
  EndColor                        #323A4E
  FontColor                       white
  StartColor                      #323A4E
}

skinparam swimlane {
  BorderThickness                 0
  Width                           same
}

skinparam title {
  BackgroundColor                 transparent
  BorderColor                     transparent
  BorderRoundCorner               0
  BorderThickness                 0
  FontColor                       #323A4E
}

title Mesos Secrets Injection
hide footbox
' To print on US Letter, uncomment the scale directive
'scale 1056*816

'participant SGW as "Service Gateway"
'participant IAM as "Identity and\nAccess Manager"
'participant HOOK as "Secrets\nHook"

actor FW as "Framework"
participant MM as "Mesos Master"
participant MA as "Mesos Agent"
participant SEI as "Secrets Environment\nIsolator"
participant SVI as "Secrets Volume\nIsolator"
participant SR as "Secrets Resolver"
database SS as "Secrets Store"
participant CONT as "Containerizer"
participant EXEC as "Executor"
participant TASK as "Task(s)"

activate FW
    FW -> MM : TaskInfo with Secret(s)
    activate MM
        MM -> MM : Validate\n(+AuthN+Z)
        note left : Authorize access\nto secret(s) by\nNamespace Mapping
        alt Authorized
            MM -> MA : TaskInfo
            activate MA
                alt Environment Secret(s)
                    MA -> SEI : Retrieve Environment Secret(s)
                    activate SEI
                        SEI -> SR : Resolve Secret(s)
                        activate SR
                            SR -> SS : Get secret(s)
                            activate SS
                                SS -> SS : Validate\n(+AuthN+Z)
                                alt Valid
                                    SS -> SR : Secret(s) for you!
                                else Invalid
                                    SS -> SR : No Secret(s) for you!
                                end
                            deactivate SS
                            loop For each secret
                                SR -> SEI : Secret
                            end
                        deactivate SR
                        SEI -> MA : Here are your env secret(s)
                    deactivate SEI
                    MA -> CONT : Inject Env Secret(s)
                    CONT -> EXEC : Inject Env Secret(s)
                    EXEC -> TASK: Inject Env Secret(s)
                else Volume Secret(s)
                    MA -> SVI : Retrieve Volume Secret(s)
                    activate SVI
                        SVI -> SR : Resolve Secret(s)
                        activate SR
                            SR -> SS : Get Secret(s)
                            activate SS
                                SS -> SS : Validate\n(+AuthN+Z)
                                alt Valid request
                                    SS -> SR : Secret(s) for you!
                                else Invalid Request
                                    SS -> SR: No Secret(s) for you!
                                end
                            deactivate SS
                            loop For each secret
                                SR -> SVI : Secret
                            end
                        deactivate SR
                        SVI -> SVI : Place secret into agent-common ramfs
                        note left : The agent-wide ramfs is \ncreated during agent init
                        SVI -> SVI : Create ramfs in/for the sandbox and build command list
                        SVI -> MA : Command List
                    deactivate SVI
                    MA -> CONT : Command List
                    loop For each secret
                        CONT -> CONT : mv secret from agent ramfs\nto sandbox ramfs
                        CONT -> CONT : bind-mount ramfs from sandbox into container
                    end
                    CONT -> EXEC : Inject Volume Secret(s)
                    EXEC -> TASK : Inject Volume Secret(s)
                end
            deactivate MA
        else Unauthorized
            MM -> FW : Unauthorized for Secret(s)
        end
    deactivate MM
deactivate FW

@enduml

PlantUML version 1.2017.15(Mon Jul 03 12:45:34 EDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_144-b01
Operating System: Linux
OS Version: 4.13.0-gentoo-dsdt-tb-no-security
Default Encoding: UTF-8
Language: en
Country: US
-->
  </g>
</svg>
