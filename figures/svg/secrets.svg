<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1455px" preserveAspectRatio="none" style="width:1695px;height:1455px;" version="1.1" viewBox="0 0 1695 1455" width="1695px" zoomAndPan="magnify"><defs><linearGradient id="g6ifllgrzetwp0" x1="0%" x2="100%" y1="50%" y2="50%"><stop offset="0%" stop-color="#9351E5"/><stop offset="100%" stop-color="#EF468B"/></linearGradient></defs><g><rect fill="#FFFFFF" height="23.9923" style="stroke: #FFFFFF; stroke-width: 0.0;" width="164" x="765.5" y="12"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="773.5" y="28.5716">Mesos Secrets Injection</text><rect fill="#F56753" height="1300.2511" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="54.5" y="132.9846"/><rect fill="#F56753" height="1282.2511" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="229.5" y="150.9846"/><rect fill="#F56753" height="1127.3534" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="327.5" y="258.9108"/><rect fill="#F56753" height="1100.3682" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="453.5" y="285.896"/><rect fill="#F56753" height="285.8386" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="652.5" y="334.8665"/><rect fill="#F56753" height="371.7943" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="781.5" y="741.6323"/><rect fill="#F56753" height="202.8829" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1108.5" y="383.8369"/><rect fill="#F56753" height="202.8829" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1108.5" y="790.6028"/><rect fill="#F56753" height="157.8977" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1238.5" y="410.8221"/><rect fill="#F56753" height="157.8977" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1238.5" y="817.588"/><rect fill="#F56753" height="53.9705" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1326.5" y="647.6903"/><rect fill="#F56753" height="229.8671" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1326.5" y="1140.4119"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="59" x2="59" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="234.5" x2="234.5" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="332.5" x2="332.5" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="458" x2="458" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="657" x2="657" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="786" x2="786" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1113" x2="1113" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1243.5" x2="1243.5" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1331.5" x2="1331.5" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1486" x2="1486" y1="122.9846" y2="1443.2357"/><line style="stroke: #F56753; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1636" x2="1636" y1="122.9846" y2="1443.2357"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="23" y="120.2141">Framework</text><ellipse cx="59.5" cy="55.9923" fill="url(#g6ifllgrzetwp0)" rx="8" ry="8" style="stroke: #9351E5; stroke-width: 2.0;"/><path d="M59.5,63.9923 L59.5,90.9923 M46.5,71.9923 L72.5,71.9923 M59.5,90.9923 L46.5,105.9923 M59.5,90.9923 L72.5,105.9923 " fill="url(#g6ifllgrzetwp0)" style="stroke: #9351E5; stroke-width: 2.0;"/><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="90" x="189.5" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="196.5" y="112.2141">Mesos Master</text><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="86" x="289.5" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="296.5" y="112.2141">Mesos Agent</text><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="131" x="393" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="117" x="400" y="112.2141">Mesos Containerizer</text><rect fill="url(#g6ifllgrzetwp0)" height="41.9846" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="135" x="590" y="80"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="597" y="98.2218">Secrets Environment</text><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="636" y="112.2141">Isolator</text><rect fill="url(#g6ifllgrzetwp0)" height="41.9846" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="103" x="735" y="80"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="742" y="98.2218">Secrets Volume</text><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="765" y="112.2141">Isolator</text><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="109" x="1059" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="1066" y="112.2141">Secrets Resolver</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="1201.5" y="120.2141">Secrets Store</text><path d="M1225.5,72.9923 C1225.5,62.9923 1243.5,62.9923 1243.5,62.9923 C1243.5,62.9923 1261.5,62.9923 1261.5,72.9923 L1261.5,98.9923 C1261.5,108.9923 1243.5,108.9923 1243.5,108.9923 C1243.5,108.9923 1225.5,108.9923 1225.5,98.9923 L1225.5,72.9923 " fill="#20D5FF" style="stroke: #323A4E; stroke-width: 1.5;"/><path d="M1225.5,72.9923 C1225.5,82.9923 1243.5,82.9923 1243.5,82.9923 C1243.5,82.9923 1261.5,82.9923 1261.5,72.9923 " fill="none" style="stroke: #323A4E; stroke-width: 1.5;"/><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="72" x="1295.5" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="58" x="1302.5" y="112.2141">Container</text><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="65" x="1454" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="1461" y="112.2141">Executor</text><rect fill="url(#g6ifllgrzetwp0)" height="27.9923" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 0.0;" width="53" x="1610" y="93.9923"/><text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="1617" y="112.2141">Task(s)</text><rect fill="#F56753" height="1300.2511" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="54.5" y="132.9846"/><rect fill="#F56753" height="1282.2511" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="229.5" y="150.9846"/><rect fill="#F56753" height="1127.3534" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="327.5" y="258.9108"/><rect fill="#F56753" height="1100.3682" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="453.5" y="285.896"/><rect fill="#F56753" height="285.8386" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="652.5" y="334.8665"/><rect fill="#F56753" height="371.7943" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="781.5" y="741.6323"/><rect fill="#F56753" height="202.8829" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1108.5" y="383.8369"/><rect fill="#F56753" height="202.8829" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1108.5" y="790.6028"/><rect fill="#F56753" height="157.8977" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1238.5" y="410.8221"/><rect fill="#F56753" height="157.8977" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1238.5" y="817.588"/><rect fill="#F56753" height="53.9705" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1326.5" y="647.6903"/><rect fill="#F56753" height="229.8671" style="stroke: #F56753; stroke-width: 1.0;" width="10" x="1326.5" y="1140.4119"/><polygon fill="#323A4E" points="217.5,146.9846,227.5,150.9846,217.5,154.9846,221.5,150.9846" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="64.5" x2="223.5" y1="150.9846" y2="150.9846"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="71.5" y="147.3988">TaskInfo with Secret(s)</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="239.5" x2="281.5" y1="194.9329" y2="194.9329"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="281.5" x2="281.5" y1="194.9329" y2="207.9329"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="240.5" x2="281.5" y1="207.9329" y2="207.9329"/><polygon fill="#323A4E" points="250.5,203.9329,240.5,207.9329,250.5,211.9329,246.5,207.9329" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="246.5" y="177.3766">Validate</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="246.5" y="190.3618">(+AuthN+Z)</text><polygon fill="#FEDF57" points="86,164.9698,86,212.9698,224,212.9698,224,174.9698,214,164.9698,86,164.9698" style="stroke: #FEDF57; stroke-width: 0.0;"/><line style="stroke: #FEDF57; stroke-width: 0.0;" x1="214" x2="214" y1="164.9698" y2="174.9698"/><line style="stroke: #FEDF57; stroke-width: 0.0;" x1="224" x2="214" y1="174.9698" y2="174.9698"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="92" y="180.384">Authorize access</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="92" y="193.3692">to secret(s) by</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="92" y="206.3545">Namespace Mapping</text><rect fill="none" height="1200.3102" style="stroke: #27C97B; stroke-width: 2.0;" width="1670" x="13" y="225.9255"/><polygon fill="#27C97B" points="13,225.9255,74,225.9255,74,229.9255,64,239.9255,13,239.9255,13,225.9255" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="237.6643">alt</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="89" y="237.0112">[Authorized]</text><polygon fill="#323A4E" points="315.5,254.9108,325.5,258.9108,315.5,262.9108,319.5,258.9108" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="239.5" x2="321.5" y1="258.9108" y2="258.9108"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="246.5" y="255.3249">TaskInfo</text><polygon fill="#323A4E" points="441.5,281.896,451.5,285.896,441.5,289.896,445.5,285.896" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="337.5" x2="447.5" y1="285.896" y2="285.896"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="344.5" y="282.3102">Launch Container</text><rect fill="none" height="1077.3829" style="stroke: #27C97B; stroke-width: 2.0;" width="1300" x="373" y="301.8812"/><polygon fill="#27C97B" points="373,301.8812,434,301.8812,434,305.8812,424,315.8812,373,315.8812,373,301.8812" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="388" y="313.62">alt</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="449" y="312.9669">[Environment Secret(s)]</text><polygon fill="#323A4E" points="640.5,330.8665,650.5,334.8665,640.5,338.8665,644.5,334.8665" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="646.5" y1="334.8665" y2="334.8665"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="470.5" y="331.2806">Retrieve Environment Secret(s)</text><rect fill="none" height="244.8534" style="stroke: #27C97B; stroke-width: 2.0;" width="750.5" x="580" y="350.8517"/><polygon fill="#27C97B" points="580,350.8517,651,350.8517,651,354.8517,641,364.8517,580,364.8517,580,350.8517" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="595" y="362.5905">loop</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="666" y="361.9374">[For each secret]</text><polygon fill="#323A4E" points="1096.5,379.8369,1106.5,383.8369,1096.5,387.8369,1100.5,383.8369" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="662.5" x2="1102.5" y1="383.8369" y2="383.8369"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="669.5" y="380.2511">Resolve Secret</text><polygon fill="#323A4E" points="1226.5,406.8221,1236.5,410.8221,1226.5,414.8221,1230.5,410.8221" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1118.5" x2="1232.5" y1="410.8221" y2="410.8221"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="1125.5" y="407.2363">Get secret</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1248.5" x2="1290.5" y1="451.7778" y2="451.7778"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1290.5" x2="1290.5" y1="451.7778" y2="464.7778"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1249.5" x2="1290.5" y1="464.7778" y2="464.7778"/><polygon fill="#323A4E" points="1259.5,460.7778,1249.5,464.7778,1259.5,468.7778,1255.5,464.7778" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1255.5" y="434.2215">Validate</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1255.5" y="447.2068">(+AuthN+Z)</text><rect fill="none" height="81.942" style="stroke: #27C97B; stroke-width: 2.0;" width="246.5" x="1049" y="479.7778"/><polygon fill="#27C97B" points="1049,479.7778,1110,479.7778,1110,483.7778,1100,493.7778,1049,493.7778,1049,479.7778" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="1064" y="491.5166">alt</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="1125" y="490.8635">[Valid]</text><polygon fill="#323A4E" points="1129.5,508.7631,1119.5,512.7631,1129.5,516.7631,1125.5,512.7631" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1123.5" x2="1237.5" y1="512.7631" y2="512.7631"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1135.5" y="509.1772">Secret for you!</text><line style="stroke: #27C97B; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1049" x2="1295.5" y1="522.7483" y2="522.7483"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1054" y="531.834">[Invalid]</text><polygon fill="#323A4E" points="1129.5,548.7346,1119.5,552.7346,1129.5,556.7346,1125.5,552.7346" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1123.5" x2="1237.5" y1="552.7346" y2="552.7346"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1135.5" y="549.1488">No Secret for you!</text><polygon fill="#323A4E" points="673.5,582.7198,663.5,586.7198,673.5,590.7198,669.5,586.7198" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="667.5" x2="1112.5" y1="586.7198" y2="586.7198"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="679.5" y="583.134">Secret</text><polygon fill="#323A4E" points="474.5,616.7051,464.5,620.7051,474.5,624.7051,470.5,620.7051" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="468.5" x2="656.5" y1="620.7051" y2="620.7051"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="480.5" y="617.1192">Here are your env secret(s)</text><polygon fill="#323A4E" points="1314.5,643.6903,1324.5,647.6903,1314.5,651.6903,1318.5,647.6903" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="1320.5" y1="647.6903" y2="647.6903"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="470.5" y="644.1045">Launch Container with Env Secret(s)</text><polygon fill="#323A4E" points="1474.5,670.6755,1484.5,674.6755,1474.5,678.6755,1478.5,674.6755" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1336.5" x2="1480.5" y1="674.6755" y2="674.6755"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1343.5" y="671.0897">Inject Env Secret(s)</text><polygon fill="#323A4E" points="1624.5,697.6608,1634.5,701.6608,1624.5,705.6608,1628.5,701.6608" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1486.5" x2="1630.5" y1="701.6608" y2="701.6608"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1493.5" y="698.0749">Inject Env Secret(s)</text><line style="stroke: #27C97B; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="373" x2="1673" y1="711.646" y2="711.646"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="378" y="720.7317">[Volume Secret(s)]</text><polygon fill="#323A4E" points="769.5,737.6323,779.5,741.6323,769.5,745.6323,773.5,741.6323" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="775.5" y1="741.6323" y2="741.6323"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="470.5" y="738.0465">Retrieve Volume Secret(s)</text><rect fill="none" height="330.8091" style="stroke: #27C97B; stroke-width: 2.0;" width="718.5" x="612" y="757.6176"/><polygon fill="#27C97B" points="612,757.6176,683,757.6176,683,761.6176,673,771.6176,612,771.6176,612,757.6176" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="627" y="769.3563">loop</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="698" y="768.7032">[For each secret]</text><polygon fill="#323A4E" points="1096.5,786.6028,1106.5,790.6028,1096.5,794.6028,1100.5,790.6028" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="791.5" x2="1102.5" y1="790.6028" y2="790.6028"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="798.5" y="787.0169">Resolve Secret</text><polygon fill="#323A4E" points="1226.5,813.588,1236.5,817.588,1226.5,821.588,1230.5,817.588" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1118.5" x2="1232.5" y1="817.588" y2="817.588"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="57" x="1125.5" y="814.0022">Get Secret</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1248.5" x2="1290.5" y1="858.5437" y2="858.5437"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1290.5" x2="1290.5" y1="858.5437" y2="871.5437"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1249.5" x2="1290.5" y1="871.5437" y2="871.5437"/><polygon fill="#323A4E" points="1259.5,867.5437,1249.5,871.5437,1259.5,875.5437,1255.5,871.5437" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="1255.5" y="840.9874">Validate</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="1255.5" y="853.9726">(+AuthN+Z)</text><rect fill="none" height="81.942" style="stroke: #27C97B; stroke-width: 2.0;" width="246.5" x="1049" y="886.5437"/><polygon fill="#27C97B" points="1049,886.5437,1110,886.5437,1110,890.5437,1100,900.5437,1049,900.5437,1049,886.5437" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="1064" y="898.2825">alt</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="1125" y="897.6294">[Valid request]</text><polygon fill="#323A4E" points="1129.5,915.5289,1119.5,919.5289,1129.5,923.5289,1125.5,919.5289" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1123.5" x2="1237.5" y1="919.5289" y2="919.5289"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="1135.5" y="915.9431">Secret for you!</text><line style="stroke: #27C97B; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1049" x2="1295.5" y1="929.5142" y2="929.5142"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="1054" y="938.5999">[Invalid Request]</text><polygon fill="#323A4E" points="1129.5,955.5005,1119.5,959.5005,1129.5,963.5005,1125.5,959.5005" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1123.5" x2="1237.5" y1="959.5005" y2="959.5005"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1135.5" y="955.9146">No Secret for you!</text><polygon fill="#323A4E" points="802.5,989.4857,792.5,993.4857,802.5,997.4857,798.5,993.4857" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="796.5" x2="1112.5" y1="993.4857" y2="993.4857"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="808.5" y="989.8999">Secret</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="791.5" x2="833.5" y1="1024.4488" y2="1024.4488"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="833.5" x2="833.5" y1="1024.4488" y2="1037.4488"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="792.5" x2="833.5" y1="1037.4488" y2="1037.4488"/><polygon fill="#323A4E" points="802.5,1033.4488,792.5,1037.4488,802.5,1041.4488,798.5,1037.4488" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="798.5" y="1019.8777">Place secret into agent-common ramfs</text><polygon fill="#FEDF57" points="622,1007.4709,622,1042.4709,776,1042.4709,776,1017.4709,766,1007.4709,622,1007.4709" style="stroke: #FEDF57; stroke-width: 0.0;"/><line style="stroke: #FEDF57; stroke-width: 0.0;" x1="766" x2="766" y1="1007.4709" y2="1017.4709"/><line style="stroke: #FEDF57; stroke-width: 0.0;" x1="776" x2="766" y1="1017.4709" y2="1017.4709"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="628" y="1022.8851">The agent-wide ramfs is</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="628" y="1035.8703">created during agent init</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="791.5" x2="833.5" y1="1067.4266" y2="1067.4266"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="833.5" x2="833.5" y1="1067.4266" y2="1080.4266"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="792.5" x2="833.5" y1="1080.4266" y2="1080.4266"/><polygon fill="#323A4E" points="802.5,1076.4266,792.5,1080.4266,802.5,1084.4266,798.5,1080.4266" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="798.5" y="1062.8556">Create ramfs in/for the sandbox and build command list</text><polygon fill="#323A4E" points="474.5,1109.4266,464.5,1113.4266,474.5,1117.4266,470.5,1113.4266" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="468.5" x2="785.5" y1="1113.4266" y2="1113.4266"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="480.5" y="1109.8408">Command List</text><polygon fill="#323A4E" points="1314.5,1136.4119,1324.5,1140.4119,1314.5,1144.4119,1318.5,1140.4119" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="1320.5" y1="1140.4119" y2="1140.4119"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="470.5" y="1136.826">Launch Container</text><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1336.5" x2="1378.5" y1="1181.3676" y2="1181.3676"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1378.5" x2="1378.5" y1="1181.3676" y2="1194.3676"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1337.5" x2="1378.5" y1="1194.3676" y2="1194.3676"/><polygon fill="#323A4E" points="1347.5,1190.3676,1337.5,1194.3676,1347.5,1198.3676,1343.5,1194.3676" style="stroke: #323A4E; stroke-width: 1.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1343.5" y="1163.8112">Wait while volumes</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="1343.5" y="1176.7965">are prepared</text><polygon fill="#323A4E" points="1314.5,1216.3676,1324.5,1220.3676,1314.5,1224.3676,1318.5,1220.3676" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="1320.5" y1="1220.3676" y2="1220.3676"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="470.5" y="1216.7817">Inject Volume Secret(s)</text><rect fill="none" height="81.9409" style="stroke: #27C97B; stroke-width: 2.0;" width="994.5" x="383" y="1236.3528"/><polygon fill="#27C97B" points="383,1236.3528,454,1236.3528,454,1240.3528,444,1250.3528,383,1250.3528,383,1236.3528" style="stroke: #27C97B; stroke-width: 2.0;"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="398" y="1248.0916">loop</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="469" y="1247.4385">[For each secret]</text><polygon fill="#323A4E" points="1314.5,1278.338,1324.5,1282.338,1314.5,1286.338,1318.5,1282.338" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="1320.5" y1="1282.338" y2="1282.338"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="470.5" y="1265.7522">mv secret from agent ramfs</text><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="470.5" y="1278.7374">to sandbox ramfs</text><polygon fill="#323A4E" points="1314.5,1305.3085,1324.5,1309.3085,1314.5,1313.3085,1318.5,1309.3085" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="463.5" x2="1320.5" y1="1309.3085" y2="1309.3085"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="470.5" y="1305.7226">bind-mount ramfs from sandbox into container</text><polygon fill="#323A4E" points="1474.5,1339.2937,1484.5,1343.2937,1474.5,1347.2937,1478.5,1343.2937" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1336.5" x2="1480.5" y1="1343.2937" y2="1343.2937"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="1343.5" y="1339.7079">Inject Volume Secret(s)</text><polygon fill="#323A4E" points="1624.5,1366.2789,1634.5,1370.2789,1624.5,1374.2789,1628.5,1370.2789" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="1486.5" x2="1630.5" y1="1370.2789" y2="1370.2789"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="1493.5" y="1366.6931">Inject Volume Secret(s)</text><line style="stroke: #27C97B; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1683" y1="1387.2642" y2="1387.2642"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="18" y="1396.3499">[Unauthorized]</text><polygon fill="#323A4E" points="75.5,1413.2505,65.5,1417.2505,75.5,1421.2505,71.5,1417.2505" style="stroke: #323A4E; stroke-width: 1.0;"/><line style="stroke: #323A4E; stroke-width: 1.0;" x1="69.5" x2="228.5" y1="1417.2505" y2="1417.2505"/><text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="81.5" y="1413.6646">Unauthorized for Secret(s)</text><!--
@startuml

' Mesosphere Theme to be used with the PlantUML !includeurl directive like so:
'!includeurl https://raw.githubusercontent.com/vishnu2kmohan/puml/master/ipuml/Mesosphere.ipuml

' Mesosphere Colors

' Uncomment to use the new Teoz layout engine instead of Puma (default)
'!pragma teoz on

skinparam backgroundColor         transparent
skinparam defaultFontName         Source Sans Pro
skinparam footerFontColor         #323A4E
skinparam headerFontColor         #323A4E
skinparam roundcorner             10
skinparam shadowing               false

skinparam activity {
  BackgroundColor                 #9351E5|#EF468B
  BarColor                        #323A4E
  BorderColor                     transparent
  BorderThickness                 0
  DiamondBackgroundColor          #9351E5|#EF468B
  DiamondBorderColor              transparent
  DiamondBorderThickness          0
  DiamondFontColor                white
  EndColor                        #323A4E
  FontColor                       white   
  StartColor                      #323A4E
}

skinparam actor {
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #9351E5
  FontColor                       #323A4E
}

skinparam arrow {
  Color                           #323A4E
  FontColor                       #323A4E
}

skinparam database {
  BackgroundColor                 #20D5FF
  BorderColor                     #323A4E
  FontColor                       #323A4E
}

skinparam note {
  BackgroundColor                 #FEDF57
  BorderColor                     #FEDF57
  BorderThickness                 0
  FontColor                       #323A4E
}

skinparam partition {
  BackgroundColor                 transparent
  BorderColor                     #323A4E
  FontColor                       #323A4E
}

skinparam sequence {
  BoxBackgroundColor              #20D5FF
  BoxBorderColor                  #20D5FF
  BoxFontColor                    #323A4E
  BoxLineColor                    #20D5FF
  DividerBackgroundColor          #323A4E
  DividerBorderColor              #323A4E
  DividerFontColor                white
  GroupBackgroundColor            #27C97B
  GroupBodyBackgroundColor        transparent
  GroupBorderColor                #27C97B
  GroupFontColor                  #323A4E
  GroupHeaderFontColor            #323A4E
  LifeLineBackgroundColor         #F56753
  LifeLineBorderColor             #F56753
  MessageAlign                    left
  NewpageSeparatorColor           #323A4E
  ParticipantBackgroundColor      #9351E5|#EF468B
  ParticipantBorderColor          transparent
  ParticipantBorderThickness      0
  ParticipantFontColor            white
  ReferenceBackgroundColor        #323A4E
  ReferenceBorderColor            #323A4E
  ReferenceFontColor              white
  ReferenceHeaderBackgroundColor  #323A4E
  StereotypeFontColor             #323A4E
}

skinparam state {
  AttributeFontColor              white
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #F56753
  EndColor                        #323A4E
  FontColor                       white
  StartColor                      #323A4E
}

skinparam swimlane {
  BorderThickness                 0
  Width                           same
}

skinparam title {
  BackgroundColor                 transparent
  BorderColor                     transparent
  BorderRoundCorner               0
  BorderThickness                 0
  FontColor                       #323A4E
}

title Mesos Secrets Injection
hide footbox
' To print on US Letter, uncomment the scale directive
'scale 1056*816

'participant SGW as "Service Gateway"
'participant IAM as "Identity and\nAccess Manager"
'participant HOOK as "Secrets\nHook"

actor FW as "Framework"
participant MM as "Mesos Master"
participant MA as "Mesos Agent"
participant MCONT as "Mesos Containerizer"
participant SEI as "Secrets Environment\nIsolator"
participant SVI as "Secrets Volume\nIsolator"
participant SR as "Secrets Resolver"
database SS as "Secrets Store"
participant CONT as "Container"
participant EXEC as "Executor"
participant TASK as "Task(s)"

activate FW
    FW -> MM : TaskInfo with Secret(s)
    activate MM
        MM -> MM : Validate\n(+AuthN+Z)
        note left : Authorize access\nto secret(s) by\nNamespace Mapping
        alt Authorized
            MM -> MA : TaskInfo
            activate MA
                MA -> MCONT : Launch Container
                activate MCONT
                    alt Environment Secret(s)
                        MCONT -> SEI : Retrieve Environment Secret(s)
                        activate SEI
                            loop For each secret
                                SEI -> SR : Resolve Secret
                                activate SR
                                    SR -> SS : Get secret
                                    activate SS
                                        SS -> SS : Validate\n(+AuthN+Z)
                                        alt Valid
                                            SS -> SR : Secret for you!
                                        else Invalid
                                            SS -> SR : No Secret for you!
                                        end
                                    deactivate SS
                                    SR -> SEI : Secret
                                deactivate SR
                            end
                            SEI -> MCONT : Here are your env secret(s)
                        deactivate SEI
                        MCONT -> CONT: Launch Container with Env Secret(s)
                        activate CONT
                            CONT -> EXEC : Inject Env Secret(s)
                            EXEC -> TASK: Inject Env Secret(s)
                        deactivate CONT
                    else Volume Secret(s)
                        MCONT -> SVI : Retrieve Volume Secret(s)
                        activate SVI
                            loop For each secret
                                SVI -> SR : Resolve Secret
                                activate SR
                                    SR -> SS : Get Secret
                                    activate SS
                                        SS -> SS : Validate\n(+AuthN+Z)
                                        alt Valid request
                                            SS -> SR : Secret for you!
                                        else Invalid Request
                                            SS -> SR: No Secret for you!
                                        end
                                    deactivate SS
                                    SR -> SVI : Secret
                                deactivate SR
                                SVI -> SVI : Place secret into agent-common ramfs
                                note left : The agent-wide ramfs is \ncreated during agent init
                                SVI -> SVI : Create ramfs in/for the sandbox and build command list
                            end
                            SVI -> MCONT : Command List
                        deactivate SVI
                        MCONT -> CONT : Launch Container
                        activate CONT
                            CONT -> CONT : Wait while volumes\nare prepared
                            MCONT -> CONT : Inject Volume Secret(s)
                            loop For each secret
                                MCONT -> CONT : mv secret from agent ramfs\nto sandbox ramfs
                                MCONT -> CONT : bind-mount ramfs from sandbox into container
                            end
                            CONT -> EXEC : Inject Volume Secret(s)
                            EXEC -> TASK : Inject Volume Secret(s)
                        deactivate CONT
                    end
                deactivate MCONT
            deactivate MA
        else Unauthorized
            MM -> FW : Unauthorized for Secret(s)
        end
    deactivate MM
deactivate FW

@enduml

PlantUML version 1.2017.15(Mon Jul 03 12:45:34 EDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_144-b01
Operating System: Linux
OS Version: 4.13.0-gentoo-dsdt-tb-no-security
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>