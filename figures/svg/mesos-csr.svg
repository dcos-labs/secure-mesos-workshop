<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" contentScriptType="application/ecmascript" contentStyleType="text/css" height="348px" preserveAspectRatio="none" style="width:330px;height:348px" version="1.1" viewBox="0 0 330 348" width="330px" zoomAndPan="magnify" id="svg122655" sodipodi:docname="mesos-csr.svg" inkscape:export-filename="/home/vishnu/tank/git/dcos-labs/secure-mesos-workshop/figures/png/mesos-csr.png" inkscape:export-xdpi="384" inkscape:export-ydpi="384" inkscape:version="0.92.2 5c3e80d, 2017-08-06">
  <metadata id="metadata122659">
    <rdf:RDF>
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="640" inkscape:window-height="480" id="namedview122657" showgrid="false" inkscape:zoom="3.3764368" inkscape:cx="165" inkscape:cy="174" inkscape:current-layer="svg122655" />
  <defs id="defs122565">
    <linearGradient id="g1a3gna1q2meav0" x1="0%" x2="100%" y1="50%" y2="50%">
      <stop offset="0%" stop-color="#9351E5" id="stop122560" />
      <stop offset="100%" stop-color="#EF468B" id="stop122562" />
    </linearGradient>
  </defs>
  <g id="g122653">
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="209" x="62" y="21.5716" id="text122567">Mesos TLS Certificate Generation</text>
    <rect fill="#F56753" height="242.8829" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="63" y="83.9769" id="rect122569" />
    <rect fill="#F56753" height="144.9125" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="208" y="181.9474" id="rect122571" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="68" x2="68" y1="73.9769" y2="336.8599" id="line122573" />
    <line style="stroke:#F56753;stroke-width:1;stroke-dasharray:5, 5" x1="212.5" x2="212.5" y1="73.9769" y2="336.8599" id="line122575" />
    <rect fill="url(#g1a3gna1q2meav0)" height="41.9846" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="90" x="23" y="30.9923" id="rect122577" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="30" y="49.2141" id="text122579">Mesos Master</text>
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="43" y="63.2065" id="text122581">or Agent</text>
    <rect fill="url(#g1a3gna1q2meav0)" height="41.9846" rx="5" ry="5" style="stroke:#FFFFFF;stroke-width:0" width="129" x="148.5" y="30.9923" id="rect122583" />
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="115" x="155.5" y="49.2141" id="text122585">Certificate Authority</text>
    <text fill="#FFFFFF" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="19" x="203.5" y="63.2065" id="text122587">API</text>
    <rect height="242.8829" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="63" y="83.9769" id="rect122589" fill="#F56753" />
    <rect fill="#F56753" height="144.9125" style="stroke:#F56753;stroke-width:1;fill:#f56753;fill-opacity:0.49803922" width="10" x="208" y="181.9474" id="rect122591" />
    <line style="stroke:#323A4E;stroke-width:1" x1="73" x2="115" y1="102.9622" y2="102.9622" id="line122593" />
    <line style="stroke:#323A4E;stroke-width:1" x1="115" x2="115" y1="102.9622" y2="115.9622" id="line122595" />
    <line style="stroke:#323A4E;stroke-width:1" x1="74" x2="115" y1="115.9622" y2="115.9622" id="line122597" />
    <polygon fill="#323A4E" points="84,111.9622,74,115.9622,84,119.9622,80,115.9622" style="stroke:#323A4E;stroke-width:1" id="polygon122599" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="80" y="98.3911" id="text122601">Generate RSA Keypair</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="73" x2="115" y1="142.9474" y2="142.9474" id="line122603" />
    <line style="stroke:#323A4E;stroke-width:1" x1="115" x2="115" y1="142.9474" y2="155.9474" id="line122605" />
    <line style="stroke:#323A4E;stroke-width:1" x1="74" x2="115" y1="155.9474" y2="155.9474" id="line122607" />
    <polygon fill="#323A4E" points="84,151.9474,74,155.9474,84,159.9474,80,155.9474" style="stroke:#323A4E;stroke-width:1" id="polygon122609" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="80" y="138.3763" id="text122611">Generate CSR</text>
    <polygon fill="#323A4E" points="196,177.9474,206,181.9474,196,185.9474,200,181.9474" style="stroke:#323A4E;stroke-width:1" id="polygon122613" />
    <line style="stroke:#323A4E;stroke-width:1" x1="73" x2="202" y1="181.9474" y2="181.9474" id="line122615" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="80" y="178.3615" id="text122617">Sign CSR</text>
    <line style="stroke:#323A4E;stroke-width:1" x1="218" x2="260" y1="209.9178" y2="209.9178" id="line122619" />
    <line style="stroke:#323A4E;stroke-width:1" x1="260" x2="260" y1="209.9178" y2="222.9178" id="line122621" />
    <line style="stroke:#323A4E;stroke-width:1" x1="219" x2="260" y1="222.9178" y2="222.9178" id="line122623" />
    <polygon fill="#323A4E" points="229,218.9178,219,222.9178,229,226.9178,225,222.9178" style="stroke:#323A4E;stroke-width:1" id="polygon122625" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="225" y="205.3468" id="text122627">Validate Request</text>
    <rect fill="none" height="81.942" style="stroke:#27C97B;stroke-width:2" width="274.5" x="13" y="237.9178" id="rect122629" />
    <polygon fill="#27C97B" points="13,237.9178,74,237.9178,74,241.9178,64,251.9178,13,251.9178,13,237.9178" style="stroke:#27C97B;stroke-width:2" id="polygon122631" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="249.6566" id="text122633">alt</text>
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="89" y="249.0035" id="text122635">[Valid Request]</text>
    <polygon fill="#323A4E" points="84,266.9031,74,270.9031,84,274.9031,80,270.9031" style="stroke:#323A4E;stroke-width:1" id="polygon122637" />
    <line style="stroke:#323A4E;stroke-width:1" x1="78" x2="207" y1="270.9031" y2="270.9031" id="line122639" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="90" y="267.3172" id="text122641">Signed Certificate</text>
    <line style="stroke:#27C97B;stroke-width:1;stroke-dasharray:2, 2" x1="13" x2="287.5" y1="280.8883" y2="280.8883" id="line122643" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="18" y="289.974" id="text122645">[Invalid Request]</text>
    <polygon fill="#323A4E" points="84,306.8746,74,310.8746,84,314.8746,80,310.8746" style="stroke:#323A4E;stroke-width:1" id="polygon122647" />
    <line style="stroke:#323A4E;stroke-width:1" x1="78" x2="207" y1="310.8746" y2="310.8746" id="line122649" />
    <text fill="#323A4E" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="90" y="307.2888" id="text122651">Error</text>
    <!--
@startuml

' Mesosphere Theme to be used with the PlantUML !includeurl directive like so:
'!includeurl https://raw.githubusercontent.com/vishnu2kmohan/puml/master/ipuml/Mesosphere.ipuml

' Mesosphere Colors

' Uncomment to use the new Teoz layout engine instead of Puma (default)
'!pragma teoz on

skinparam arrowColor              #323A4E
skinparam backgroundColor         transparent
skinparam defaultFontName         Source Sans Pro
skinparam footerFontColor         #323A4E
skinparam headerFontColor         #323A4E
skinparam roundcorner             10
skinparam shadowing               false
skinparam titleFontColor          #323A4E

skinparam activity {
  ArrowColor                      #323A4E
  ArrowFontColor                  #323A4E
  BackgroundColor                 #9351E5|#EF468B
  BarColor                        #323A4E
  BorderColor                     transparent
  BorderThickness                 0
  DiamondBackgroundColor          #9351E5|#EF468B
  DiamondBorderColor              transparent
  DiamondBorderThickness          0
  DiamondFontColor                white
  EndColor                        #323A4E
  FontColor                       white   
  PartitionBackgroundColor        transparent
  PartitionBorderColor            #323A4E
  PartitionFontColor              #323A4E
  StartColor                      #323A4E
}

skinparam actor {
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #9351E5
}

skinparam note {
  BackgroundColor                 #FEDF57
  BorderColor                     #FEDF57
  BorderThickness                 0
  FontColor                       #323A4E
}

skinparam partition {
  BackgroundColor                 transparent
  BorderColor                     #323A4E
  FontColor                       #323A4E
}

skinparam sequence {
  ArrowColor                      #323A4E
  ArrowFontColor                  #323A4E
  BoxBackgroundColor              #20D5FF
  BoxBorderColor                  #20D5FF
  BoxFontColor                    #323A4E
  BoxLineColor                    #20D5FF
  DividerBackgroundColor          #323A4E
  DividerBorderColor              #323A4E
  DividerFontColor                white
  GroupBackgroundColor            #27C97B
  GroupBodyBackgroundColor        transparent
  GroupBorderColor                #27C97B
  GroupFontColor                  #323A4E
  GroupHeaderFontColor            #323A4E
  LifeLineBackgroundColor         #F56753
  LifeLineBorderColor             #F56753
  MessageAlign                    left
  NewpageSeparatorColor           #323A4E
  ParticipantBackgroundColor      #9351E5|#EF468B
  ParticipantBorderColor          transparent
  ParticipantBorderThickness      0
  ParticipantFontColor            white
  ReferenceBackgroundColor        #323A4E
  ReferenceBorderColor            #323A4E
  ReferenceFontColor              white
  ReferenceHeaderBackgroundColor  #323A4E
  StereotypeFontColor             #323A4E
  TitleFontColor                  #323A4E
}

skinparam state {
  ArrowColor                      #323A4E 
  AttributeFontColor              white
  BackgroundColor                 #9351E5|#EF468B
  BorderColor                     #F56753
  EndColor                        #323A4E
  FontColor                       white
  StartColor                      #323A4E
}

skinparam swimlane {
  BorderThickness                 0
  TitleFontColor                  #323A4E
  Width                           same
}

title Mesos TLS Certificate Generation
hide footbox
' To print on US Letter, uncomment the scale directive
'scale 1056*816

participant M as "Mesos Master\nor Agent"
participant CA_API as "Certificate Authority\nAPI"

activate M
M -> M: Generate RSA Keypair
M -> M: Generate CSR
M -> CA_API : Sign CSR
activate CA_API
CA_API -> CA_API : Validate Request
alt Valid Request
    CA_API -> M : Signed Certificate
else Invalid Request
    CA_API -> M : Error
end
deactivate CA_API
deactivate M

@enduml

PlantUML version 1.2017.15(Mon Jul 03 12:45:34 EDT 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_144-b01
Operating System: Linux
OS Version: 4.13.0-gentoo-dsdt-tb-no-security
Default Encoding: UTF-8
Language: en
Country: US
-->
  </g>
</svg>
